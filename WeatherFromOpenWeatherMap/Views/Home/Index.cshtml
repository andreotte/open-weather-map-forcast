@model IEnumerable<WeatherFromOpenWeatherMap.Models.Forecast>

@{
    string apiKey = ConfigReaderDAL.ReadSetting("api_key");
}

<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script>    
    function getWeather(callback) {
        var weather = 'https://api.openweathermap.org/data/2.5/forecast?zip=49505,us&appid='+'@apiKey';
        $.ajax({
          dataType: "jsonp",
          jsonpCallback: 'jsonCallback',
          url: weather,
          password: "bf8227f467382d0f7b5faf6cfb7bab7a",
          success: callback
        });
    }

    // get data:
    getWeather(function (data) {
        console.log('weather data received');
        console.log(data);
    });
</script>

<div class="heading">
    <h1>Bring on the AJAX</h1>
    <button id="load" onclick="sendRequest()">BringIt</button>
</div>
<div id="ajax">

</div>
@*<table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Date)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Temperature) (°F)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Pressure) (hPa)
            </th>
            <th></th>
        </tr>

    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Date)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Temperature)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Pressure)
            </td>

        </tr>
    }

    </table>*@
